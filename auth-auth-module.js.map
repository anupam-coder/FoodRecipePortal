{"version":3,"sources":["./src/app/auth/auth.component.html","./src/app/auth/auth.component.ts","./src/app/auth/auth.module.ts"],"names":[],"mappings":"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","file":"auth-auth-module.js","sourcesContent":["export default \"<ng-template appPlaceholder></ng-template>\\n<div class=\\\"row\\\">\\n  <div class=\\\"col-xs-12 col-md-6 col-md-offset-3\\\">\\n    <!-- <div class=\\\"alert alert-danger\\\" *ngIf=\\\"error\\\">\\n      <p>{{ error }}</p>\\n    </div> -->\\n    <!-- <app-alert\\n      [message]=\\\"error\\\"\\n      *ngIf=\\\"error\\\"\\n      (close)=\\\"onHandleError()\\\"\\n    ></app-alert> -->\\n    <div *ngIf=\\\"isLoading\\\" style=\\\"text-align: center;\\\">\\n      <app-loading-spinner></app-loading-spinner>\\n    </div>\\n    <form #authForm=\\\"ngForm\\\" (ngSubmit)=\\\"onSubmit(authForm)\\\" *ngIf=\\\"!isLoading\\\">\\n      <div class=\\\"form-group\\\">\\n        <label for=\\\"email\\\">E-Mail</label>\\n        <input\\n          type=\\\"email\\\"\\n          id=\\\"email\\\"\\n          class=\\\"form-control\\\"\\n          ngModel\\n          name=\\\"email\\\"\\n          required\\n          email\\n        />\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label for=\\\"password\\\">Password</label>\\n        <input\\n          type=\\\"password\\\"\\n          id=\\\"password\\\"\\n          class=\\\"form-control\\\"\\n          ngModel\\n          name=\\\"password\\\"\\n          required\\n          minlength=\\\"6\\\"\\n        />\\n      </div>\\n      <div>\\n        <button\\n          class=\\\"btn btn-primary\\\"\\n          type=\\\"submit\\\"\\n          [disabled]=\\\"!authForm.valid\\\"\\n        >\\n          {{ isLoginMode ? 'Login' : 'Sign Up' }}\\n        </button>\\n        |\\n        <button class=\\\"btn btn-primary\\\" (click)=\\\"onSwitchMode()\\\" type=\\\"button\\\">\\n          Switch to {{ isLoginMode ? 'Sign Up' : 'Login' }}\\n        </button>\\n      </div>\\n    </form>\\n    <br>\\n    <p>Want to buy something!!...no need to login, please visit Local Store and Shopping List</p>\\n    <!-- <p>Want to buy something!, then no need to login, please visit <a href=\\\"http://localhost:4200/local-stores\\\">Local Store</a> and <a href=\\\"http://localhost:4200/shopping-list\\\">Shopping List</a>t</p> -->\\n  </div>\\n</div>\\n\"","import {\n  Component,\n  ComponentFactoryResolver,\n  ViewChild,\n  OnDestroy\n} from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Observable, Subscription } from 'rxjs';\n\nimport { AuthService, AuthResponseData } from './auth.service';\nimport { AlertComponent } from '../shared/alert/alert.component';\nimport { PlaceholderDirective } from '../shared/placeholder/placeholder.directive';\n\n@Component({\n  selector: 'app-auth',\n  templateUrl: './auth.component.html'\n})\nexport class AuthComponent implements OnDestroy {\n  isLoginMode = true;\n  isLoading = false;\n  error: string = null;\n  @ViewChild(PlaceholderDirective, { static: false }) alertHost: PlaceholderDirective;\n\n  private closeSub: Subscription;\n\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n    private componentFactoryResolver: ComponentFactoryResolver\n  ) {}\n\n  onSwitchMode() {\n    this.isLoginMode = !this.isLoginMode;\n  }\n\n  onSubmit(form: NgForm) {\n    if (!form.valid) {\n      return;\n    }\n    const email = form.value.email;\n    const password = form.value.password;\n\n    let authObs: Observable<AuthResponseData>;\n\n    this.isLoading = true;\n\n    if (this.isLoginMode) {\n      authObs = this.authService.login(email, password);\n    } else {\n      authObs = this.authService.signup(email, password);\n    }\n\n    authObs.subscribe(\n      resData => {\n        console.log(resData);\n        this.isLoading = false;\n        this.router.navigate(['/recipes']);\n      },\n      errorMessage => {\n        console.log(errorMessage);\n        this.error = errorMessage;\n        this.showErrorAlert(errorMessage);\n        this.isLoading = false;\n      }\n    );\n\n    form.reset();\n  }\n\n  onHandleError() {\n    this.error = null;\n  }\n\n  ngOnDestroy() {\n    if (this.closeSub) {\n      this.closeSub.unsubscribe();\n    }\n  }\n\n  private showErrorAlert(message: string) {\n    // const alertCmp = new AlertComponent();\n    const alertCmpFactory = this.componentFactoryResolver.resolveComponentFactory(\n      AlertComponent\n    );\n    const hostViewContainerRef = this.alertHost.viewContainerRef;\n    hostViewContainerRef.clear();\n\n    const componentRef = hostViewContainerRef.createComponent(alertCmpFactory);\n\n    componentRef.instance.message = message;\n    this.closeSub = componentRef.instance.close.subscribe(() => {\n      this.closeSub.unsubscribe();\n      hostViewContainerRef.clear();\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport { AuthComponent } from './auth.component';\nimport { SharedModule } from '../shared/shared.module';\n\n@NgModule({\n  declarations: [AuthComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n    RouterModule.forChild([{ path: '', component: AuthComponent }]),\n    SharedModule\n  ]\n})\nexport class AuthModule {}\n"],"sourceRoot":"webpack:///"}